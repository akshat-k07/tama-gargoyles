<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Tama Gargoyles</title>

    <link rel="stylesheet" th:href="@{/css/general.css}" />
</head>
<body th:attr="data-track=@{/audio/music/home.mp3}">


<!-- ======================================================
     TOP HUD (MATCHES GAME PAGE)
     ====================================================== -->
<header class="hud-top hud-top--index">
    <div class="hud-top__left">
        <h1 class="game-title">Tama Gargoyles</h1>
    </div>

    <div class="hud-top__right">

        <!-- NOT LOGGED IN -->
        <div sec:authorize="isAnonymous()">
            <p class="hud-muted">You are not logged in.</p>
            <button class="btn"
                    onclick="window.location.href='/oauth2/authorization/auth0'">
                Log in with Auth0
            </button>
        </div>

        <!-- LOGGED IN -->
        <div sec:authorize="isAuthenticated()">
            <div class="greeting">
                Logged in as
                <strong>
                    <span sec:authentication="principal.attributes['email']"></span>
                </strong>
            </div>

            <div class="hud-actions">

                <!-- MUSIC CONTROL -->
                <button class="btn" id="music-toggle" type="button" onclick="tgToggleMusic()">
                    â–¶ Music
                </button>


                <button class="btn"
                        onclick="window.location.href='/game'">
                    Go to Game
                </button>

                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="btn">
                        Log out
                    </button>
                </form>
            </div>
        </div>

    </div>
</header>

<!-- ======================================================
     GAME RULES / CONTENT
     ====================================================== -->

<main id="game-rules">
<div class="panel">

    <h2><span aria-hidden="true">ğŸ®</span> Game Rules</h2>
    <hr>

    <h3><span aria-hidden="true">ğŸ¥š</span> Starting the Game</h3>
    <ul>
        <li>At the start of the game you receive an egg, and it becomes your responsibility to care for it</li>
        <li>In time the egg hatches, and you can name your Tama Gargoyle</li>
    </ul>

    <hr>

    <h3><span aria-hidden="true">â±ï¸</span> Time & Needs</h3>
    <ul>
        <li>
            As time passes, your Tama Gargoyle:
            <ul>
                <li>Gets hungrier</li>
                <li>Loses happiness</li>
            </ul>
        </li>
        <li>
            If hunger stays too low:
            <ul>
                <li>Happiness decreases faster</li>
            </ul>
        </li>
        <li>
            If happiness and hunger are neglected:
            <ul>
                <li>Health will decrease</li>
            </ul>
        </li>
        <li>
            If health reaches 0:
            <ul>
                <li>
                    <span role="img" aria-label="Skull">ğŸ’€</span>
                    Your Tama Gargoyle dies
                </li>
            </ul>
        </li>
    </ul>


    <hr>

    <h3><span aria-hidden="true">ğŸ</span> Feeding</h3>

    <p>When it is hungry you need to feed your Tama Gargoyle, but you have limited food.</p>

    <p>If it is not hungry, you won't be able to feed it.</p>

    <p>The food you give your Tama Gargoyle affects how it evolves:</p>

    <table>
        <caption>Food types and their effects on your Tama Gargoyle</caption>
        <thead>
        <tr>
            <th scope="col">Food</th>
            <th scope="col">Effect</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><span aria-hidden="true">ğŸª¨</span> Rocks</td>
            <td>Increases Strength, lowers Speed & Intelligence</td>
        </tr>
        <tr>
            <td><span aria-hidden="true">ğŸ›</span> Bugs</td>
            <td>Increases Speed, lowers Strength & Intelligence</td>
        </tr>
        <tr>
            <td><span aria-hidden="true">ğŸ</span> Fruit</td>
            <td>Increases Intelligence, lowers Strength & Speed</td>
        </tr>
        <tr>
            <td><span aria-hidden="true">â“</span> Mystery Food</td>
            <td>Random effects â€” good or bad</td>
        </tr>
        </tbody>
    </table>



    <hr>

    <h3><span aria-hidden="true">ğŸ²</span> Playing Games</h3>

    <p>Playing with your Tama Gargoyle increases its happiness and can also win food:</p>

    <ul>
        <li>
            <span role="img" aria-label="Strength">ğŸ’ª</span>
            Strength games â†’ Strength
        </li>
        <li>
            <span role="img" aria-label="Speed">âš¡</span>
            Speed games â†’ Speed
        </li>
        <li>
            <span role="img" aria-label="Intelligence">ğŸ§ </span>
            Intelligence games â†’ Intelligence
        </li>

    </ul>


    <hr>

    <h3><span aria-hidden="true">ğŸ§¬</span> Growth & Evolution</h3>
    <ul>
        <li>With good care, your Tama Gargoyle grows into an adult</li>
        <li>Its strongest stat influences its evolution type</li>
        <li>
            Adults can be:
            <ul>
                <li>Good (obedient)</li>
                <li>Bad (may disobeyâ€¦ sometimes helpfully!)</li>
            </ul>
        </li>
    </ul>


    <hr>

    <h3><span aria-hidden="true">âš”ï¸</span> Battle Mode</h3>
    <ul>
        <li>Adult gargoyles may battle opponents with unknown stats</li>
        <li>Battles are turn-based, card-style</li>
        <li>First to three wins!</li>
    </ul>

    <p>Battle Rules (Rock-Paper-Scissors Logic):</p>
    <ul>
        <li>ğŸ’ª Strength beats âš¡ Speed</li>
        <li>âš¡ Speed beats ğŸ§  Intelligence</li>
        <li>ğŸ§  Intelligence beats ğŸ’ª Strength</li>
    </ul>

<!--    <p>If both players choose the same type:</p>-->
<!--    <ul>-->
<!--        <li>The higher stat wins</li>-->
<!--    </ul>-->

    <p>Battle Outcomes:</p>
    <ul>
        <li>
            Win â†’
            <span role="img" aria-label="Gift">ğŸ</span>
            3 special foods
        </li>
        <li>
            Lose â†’
            <span role="img" aria-label="Heart">â¤ï¸</span>
            Health drops by 20%, hunger drops by 30%
        </li>
    </ul>

    <p>Good luck!</p>

</div>
<audio id="bg-music" loop preload="auto"></audio>
<script th:src="@{/js/music.js}"></script>



<script>
    const audio = () => document.getElementById("bg-music");
    const track = () => document.body.dataset.track;

    document.getElementById("music-play").addEventListener("click", () => {
      localStorage.setItem("musicOn", "1");
      if (track() && audio().src !== track()) audio().src = track();
      audio().play();
    });

    document.getElementById("music-stop").addEventListener("click", () => {
      localStorage.setItem("musicOn", "0");
      audio().pause();
    });
</script>


</main>
</body>
</html>
